(function(e){function t(t){for(var n,a,r=t[0],c=t[1],l=t[2],d=0,h=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},i={app:0},s=[];function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/discharge/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"00d4":function(e,t,o){"use strict";var n=o("a663"),i=o.n(n);i.a},"05e4":function(e,t,o){"use strict";var n=o("d232"),i=o.n(n);i.a},"0c01":function(e,t,o){},1:function(e,t){},"1d1a":function(e,t,o){"use strict";var n=o("fefb"),i=o.n(n);i.a},2:function(e,t){},"31cc":function(e,t,o){},"33e8":function(e,t,o){},"3a1f":function(e,t,o){},"404b":function(e,t,o){"use strict";var n=o("a427"),i=o.n(n);i.a},"4ee2":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("3ec9");var n=o("5c0c"),i=(o("c91d"),o("0263")),s=(o("2621"),o("0662")),a=(o("93bc"),o("d217")),r=(o("006a"),o("54b3")),c=(o("008e"),o("33d4")),l=(o("95ad"),o("6b4e")),u=(o("eee3"),o("e842")),d=(o("e7eb"),o("18d3")),h=(o("bcab"),o("c6a1")),f=(o("cce0"),o("b76d")),p=(o("82b4"),o("4716")),m=o("6e6d"),g=(o("9f45"),o("16be")),v=o.n(g),y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)},b=[],C=(o("7c55"),o("6691")),I={},w=Object(C["a"])(I,y,b,!1,null,null,null),S=w.exports,x=o("c2f3"),_=o.n(x),k=o("b516"),D=o.n(k),T=o("2df7"),B=o.n(T),$=o("e2b1"),N=o.n($),A=o("f1c4"),j=o.n(A),O=o("fbf4"),L=o.n(O),P=o("eb82"),E=o.n(P),q=o("74bd"),U=o.n(q),R=o("d2eb"),M=o.n(R),W=o("78d4"),G=o.n(W),Z=o("c478"),J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"productBox"},[o("div",e._l(e.goodsCoverImages,(function(e,t){return o("img",{key:t,staticStyle:{display:"block"},attrs:{src:decodeURIComponent(e),width:"100%;height:auto;"}})})),0),o("PriceAndBuy",{attrs:{priceDate:e.priceDate},on:{"on-buyCourse":e.buyCourse,hotPart:function(t){return e.goFree()}}}),o("Dialog",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],on:{closeDialog:e.closeDialog,login:e.goLogin}})],1)},F=[],z=o("977b"),Q=o.n(z),H=o("9889"),V=o.n(H),X=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"ButtonsBox"},[o("div",{staticClass:"priceInfo",on:{click:function(t){return e.getFree()}}},[o("div",[o("i",{directives:[{name:"show",rawName:"v-show",value:!!e.priceDate.buyPrice,expression:"!!priceDate.buyPrice"}]},[e._v("¥")]),o("span",[e._v(e._s(0===e.priceDate.buyPrice?"免费":e.priceDate.buyPrice))]),o("del",[e._v("原价"+e._s(e.priceDate.originalPrice))])]),o("p",{directives:[{name:"show",rawName:"v-show",value:!!e.priceDate.buyPrice&&!!e.priceDate.discount,expression:"!!priceDate.buyPrice&&!!priceDate.discount"}]},[e._v(e._s(e.priceDate.isDiscount?"已":"点击")+"领取"+e._s(e.priceDate.discount)+"元优惠券")])]),o("div",{staticClass:"buyBtn",on:{click:e.goToBuy}},[e._v("购买课程")])])},K=[],Y={name:"PriceAndBuy",props:{priceDate:{type:Object,default:function(){}}},methods:{goToBuy:function(){this.$emit("on-buyCourse","我就是参数")},getFree:function(){this.$emit("hotPart")}},data:function(){return{}}},ee=Y,te=(o("5af3"),Object(C["a"])(ee,X,K,!1,null,"7624d1e6",null)),oe=te.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Dialog"},[n("div",{staticClass:"box"},[n("li",{staticClass:"title center"},[e._v("请绑定手机号")]),n("li",{staticClass:"connect center"},[e._v("为方便我们客服人员与您联系，请绑定手机")]),n("li",{staticClass:"center cellPhone"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{type:"number",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]),n("li",{staticClass:"center"},[n("div",{staticClass:"code"},[n("div",{staticClass:"left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.verifyCode,expression:"verifyCode"}],attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:e.verifyCode},on:{input:function(t){t.target.composing||(e.verifyCode=t.target.value)}}})]),n("div",{staticClass:"right"},[n("input",{ref:"message_get",attrs:{type:"button",value:"发送验证码",disabled:e.isDisabled},on:{click:function(t){return e.getCode()}}})])])]),n("li",{staticClass:"bind center"},[n("button",{style:{background:e.styleObject},on:{click:function(t){return e.register()}}},[e._v("绑定")])]),n("li",{staticClass:"delete"},[n("img",{attrs:{src:o("ed3a"),alt:"del"},on:{click:function(t){return e.closeDialog()}}})])]),n("div",{staticClass:"cover"})])},ie=[],se={name:"Dialog",data:function(){return{countdown:60,phoneNumber:"",verifyCode:"",styleObject:"",isDisabled:!0}},watch:{verifyCode:function(e,t){this.verifyCode&&this.phoneNumber&&(this.styleObject="rgba(255,120,71,1)")},phoneNumber:function(e,t){this.phoneNumber&&this.checkPhone(this.phoneNumber)&&(this.isDisabled=!1)}},methods:{checkPhone:function(e){var t=/^1(3|4|5|6|7|8|9)\d{9}$/;return!!t.test(e)},closeDialog:function(){this.$emit("closeDialog",!1)},getCode:function(){var e=this;this.$fetch("/authBaseUrl/api/getOtp?mobileNo=".concat(this.phoneNumber,"&type=3")).then((function(t){console.log(t,"发送验证码"),e.countTime()}))},countTime:function(){var e=this,t=this.$refs.message_get;0==this.countdown?(t.removeAttribute("disabled"),t.value="重新发送",this.countdown=60):(t.setAttribute("disabled",!0),t.value=this.countdown+"S",this.countdown--,V()((function(){e.countTime(t)}),1e3))},register:function(){this.$emit("login",[this.phoneNumber,this.verifyCode])}}},ae=se,re=(o("9667"),Object(C["a"])(ae,ne,ie,!1,null,"124ac801",null)),ce=re.exports,le={name:"Detail",data:function(){return{appId:"wx305763b6658f28fb",Dialog:!1,isShow:!1,isRequest:!1,goodsCoverImages:[],code:"",mobile:"",token:localStorage.getItem("userToken")||"",openId:localStorage.getItem("openId")||"",priceDate:{originalPrice:null,buyPrice:null,discount:null,code:""},unionId:"",modulus:"",wxNickname:"",newsShareInfo:{}}},components:{PriceAndBuy:oe,Dialog:ce},mounted:function(){this.goodsPvAndUv(),this.getGoodsDetail(),this.getWxCode(),window.addEventListener("blur",(function(){V()((function(){document.body.scrollIntoView(!1)}),0)}),!0)},methods:{goodsPvAndUv:function(){var e=location.href;this.$fetch("/hjBaseUrl/operate/api/h5/siYuH5LangdingPage/goodsPvAndUv?interfaceName=".concat(e))},buyGoodsButtoon:function(){this.$fetch("/hjBaseUrl/operate/api/h5/siYuH5LangdingPage/buyGoodsButtoon")},getWxCode:function(){var e=location.href;if(this.$route.query.code){var t=this.$route.query.scope,o=void 0===t?"snsapi_base":t;this.conmmonLogin(o)}else{var n;location.href=Q()(n="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(this.appId,"&redirect_uri=")).call(n,encodeURIComponent(e),"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect")}},getOther:function(){var e,t,o,n=location.href.split("?")[0],i=this.$route.query,s=i.goodsId,a=i.userId,r=void 0===a?"":a,c=Q()(e=Q()(t="".concat(n,"?goodsId=")).call(t,s,"&userId=")).call(e,r,"&scope=snsapi_userinfo");location.href=Q()(o="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(this.appId,"&redirect_uri=")).call(o,encodeURIComponent(c),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},getGoodsDetail:function(){var e,t=this,o=this.$route.query,n=o.goodsId,i=o.userId,s=void 0===i?"":i;this.$fetch(Q()(e="/hjBaseUrl/goods/api/h5/v2/activityGoods/getGoodDetail?goodsId=".concat(n,"&userId=")).call(e,s)).then((function(e){t.goodsCoverImages=e.result.goodsCoverImages,t.priceDate=e.result,V()((function(){document.title=e.result.name;var t=document.createElement("iframe");t.style.display="none",t.onload=function(){},document.body.appendChild(t)}),0),t.newsShareInfo.title=e.result.name,t.newsShareInfo.desc="",t.newsShareInfo.link=window.location.href,t.newsShareInfo.imgUrl=decodeURIComponent(e.result.goodsCoverImages[0]),t.isWeiXin()&&t.getWxSign()}))},isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase(),t=!!/micromessenger/.test(e);return t?(console.log("你正处于微信环境"),!0):(console.log("不是微信环境"),!1)},getWxSign:function(){var e=this;this.$fetch("/hjBaseUrl/inf/api/h5/information/sign?url=".concat(window.location.href)).then((function(t){if(console.log(t),t){var o={debug:!1,appId:e.appId,timestamp:t.result.timestamp,nonceStr:t.result.nonceStr,signature:t.result.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","showOptionMenu","hideAllNonBaseMenuItem","showAllNonBaseMenuItem"]};window.wx.config(o);var n=e.newsShareInfo;console.log(n),window.wx.ready((function(){window.wx.onMenuShareAppMessage(n),window.wx.onMenuShareTimeline(n),window.wx.onMenuShareQQ(n),window.wx.onMenuShareQZone(n),window.wx.onMenuShareWeibo(n)})),window.wx.error((function(e){console.log(e)}))}}))},closeDialog:function(e){this.isShow=e},conmmonLogin:function(e){var t,o,n=this,i=this.$route.query.code;this.priceDate.code=i;var s=localStorage.getItem("openId");this.$fetch(Q()(t=Q()(o="/hjBaseUrl/stu/api/h5/weixin/loginByCode?code=".concat(i,"&scope=")).call(o,e,"&openId=")).call(t,s)).then((function(e){n.isRequest=!0;var t=e.result.resultCode;switch(n.unionId=e.result.unionId,n.wxNickname=e.result.wxNickname,n.modulus=e.result.modulus,n.token=e.result.token,localStorage.setItem("userToken",e.result.token),localStorage.setItem("openId",e.result.openId),n.openId=e.result.openId,t){case 10100:alert("请联系管理员");break;case 200:break;case 10102:n.getOther();break;case 1:n.Dialog=!0;break}})).catch((function(e){return alert(e)}))},buyCourse:function(){var e=this;this.buyGoodsButtoon();var t=this.$route.query,o=t.goodsId,n=t.userId,i=void 0===n?"":n;if(this.isShow=this.Dialog,!this.isShow&&this.isRequest){var s={openId:this.openId,cip:returnCitySN["cip"],goodsId:o,paymentEntry:6,goodsOperators:i};this.$post("/hjBaseUrl/order/api/h5/auth/activityOrder/saveOrder",s,{userToken:this.token,"Content-Type":"application/json"}).then((function(t){e.mobile=t.result.mobile,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):t.result.isFree?e.$router.push({name:"studyInput",query:{goodsId:o,userId:i}}):t.result.orderExist?e.$router.push({name:"lastWay",query:{goodsId:o,userId:i,mobile:e.mobile}}):e.WxPay(t.result.wxPayPayResult)})).catch((function(e){return console.error("Error:",e)}))}},WxPay:function(e){var t=this,o=this.$route.query,n=o.goodsId,i=o.userId,s=void 0===i?"":i;WeixinJSBridge.invoke("getBrandWCPayRequest",e,(function(e){"get_brand_wcpay_request:ok"==e.err_msg&&t.$router.push({name:"lastWay",query:{goodsId:n,userId:s,mobile:t.mobile}})}))},goLogin:function(e){var t=this;this.$fetch("/hjBaseUrl/stu/api/h5/weixin/refreshModulus?openId=".concat(localStorage.getItem("openId"))).then((function(o){var n={mobileNo:e[0],modulus:o.result.modulus,otp:e[1],unionId:o.result.unionId.replace(/↵/g,""),wxNickname:t.wxNickname,clientType:"h5",versionCode:1};if(e[0]&&e[1])return t.$post("/authBaseUrl/api/privDomainBindMobile",n,{"Content-Type":"application/x-www-form-urlencoded"})})).catch((function(e){return alert(e)})).then((function(e){200==e.code&&(t.isShow=!1,t.Dialog=!1,t.token=e.data.token,localStorage.setItem("userToken",e.data.token)),400==e.code&&alert(e.message)}))},goFree:function(){if(this.priceDate.isDiscount)return!1;var e=this.$route.query,t=e.goodsId,o=e.userId,n=void 0===o?"":o;this.$router.push({name:"getPaper",query:{goodsId:t,userId:n}})}}},ue=le,de=(o("05e4"),Object(C["a"])(ue,J,F,!1,null,"8f6d3d14",null)),he=de.exports,fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home_div"},[o("div",{staticClass:"content_div"},[o("router-view")],1),o("div",{staticClass:"footer_div"},[o("van-tabbar",{attrs:{route:""}},[o("van-tabbar-item",{attrs:{replace:"",to:"/studyCourse"},scopedSlots:e._u([{key:"icon",fn:function(e){return o("span",{staticClass:"iconfont",class:e.active?"iconxuexi-xuanzhong":"iconxuexi-moren"})}}])},[e._v("学习\n      ")]),o("van-tabbar-item",{attrs:{replace:"",to:"/myLogin",icon:"search"},scopedSlots:e._u([{key:"icon",fn:function(e){return o("span",{staticClass:"iconfont",class:e.active?"iconwode-xuanzhong":"iconwode-moren"})}}])},[e._v("我的\n      ")])],1)],1)])},pe=[],me={name:"Home",components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},ge=me,ve=(o("56df"),Object(C["a"])(ge,fe,pe,!1,null,"5e7e6dff",null)),ye=ve.exports,be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"learnDetail"},[o("section",{staticClass:"videoBox"},[1==e.videoType?o("img",{staticStyle:{width:"100%",height:"260px"},attrs:{src:e.courseIntroduce.coverPicture?decodeURIComponent(e.courseIntroduce.coverPicture):""}}):e._e(),2===e.videoType?o("PlayerBL",{ref:"",attrs:{"config-bl":e.configBl}}):e._e(),3===e.videoType?o("PlayerZS",{ref:"childzs",attrs:{"config-zs":e.configZs,chatmsg:e.chatmsg},on:{onChatData:e.onChatData}}):e._e()],1),o("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[o("van-tab",{attrs:{title:"介绍"}},[o("div",{staticClass:"intrduceBox"},[o("h3",{staticClass:"title"},[e._v("课程介绍")]),o("p",{staticClass:"description",domProps:{innerHTML:e._s(e.courseIntroduce.introduction)}})])]),o("van-tab",{attrs:{title:"目录"}},[o("van-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.courseData,(function(t,n){return o("van-collapse-item",{key:t+n,attrs:{title:e.textEllipsis(t.name),name:n}},e._l(t.list,(function(n,i){return o("div",{key:n+i,staticClass:"chapterList",on:{click:function(t){return e.playVideo(n)}}},[o("div",{staticClass:"circlesBox"},[o("span",{staticClass:"circles"})]),o("div",{staticClass:"chapterInfo",style:i==t.list.length-1?"":"border-bottom: 1px solid rgba(237, 237, 237, 1)"},[o("div",{staticClass:"chapterTitle"},[o("i",{staticClass:"iconfont iconvideo_icon"}),o("span",{class:0==n.videoStatus?"text":"text active",domProps:{textContent:e._s(e.textEllipsis2(n.name))}})]),o("div",{staticClass:"chapterTips"},[0===n.liveRecordId&&null===n.liveRecordId||!n.duration?e._e():o("span",{staticClass:"time",domProps:{textContent:e._s(n.duration)}}),"END"!==n.liveStatus||n.duration?e._e():o("span",{staticClass:"time"},[e._v(e._s(e.getTime(n.openingDate))+"-"+e._s(e.endTimeSlice(n.endTime)))]),"NOT_STARTED"!==n.liveStatus||n.duration?e._e():o("span",{staticClass:"time"},[e._v(e._s(e.getTime(n.openingDate)))]),1==n.videoSource&&0==n.recordId||"END"===n.liveStatus&&0==n.liveRecordId?o("span",{staticClass:"type4"},[e._v("未上传视频")]):e._e(),n.isListen&&!e.hasBuyCourse?o("span",{staticClass:"type1"},[e._v("试看")]):e._e(),"PROCESSING"===n.liveStatus?o("span",{staticClass:"type2"},[e._v("直播中")]):e._e(),"NOT_STARTED"===n.liveStatus?o("span",{staticClass:"type3"},[e._v("未开始")]):e._e(),"END"===n.liveStatus&&n.liveRecordId?o("span",{staticClass:"type1"},[e._v("回放")]):e._e()])]),o("div",{staticClass:"iconBox"})])})),0)})),1)],1),e.isLive?o("van-tab",{attrs:{title:"讨论"}},[o("div",{staticClass:"chatBox"},[o("div",{ref:"chatList",staticClass:"chatsList",attrs:{id:"zsChatsList"},on:{scroll:e.onChatListScroll}},[o("div",{ref:"chatsWrap",staticClass:"chats-list-wrap"},e._l(e.chatChildList,(function(t,n){return o("div",{key:n,staticClass:"oneChat"},[o("div",{staticClass:"userName"},[e._v(e._s(t.sender)+" :")]),o("p",{staticClass:"userSay",domProps:{innerHTML:e._s(t.richtext)}})])})),0)]),o("div",{staticClass:"sendChatsBox"},[o("van-field",{ref:"chatInput",staticStyle:{width:"70%"},attrs:{placeholder:"我也来说两句..."},model:{value:e.chatInfo,callback:function(t){e.chatInfo=t},expression:"chatInfo"}}),o("van-button",{staticStyle:{width:"20%"},attrs:{type:"primary",color:"rgba(255, 120, 71, 1)"},on:{click:e.sendChatInfo}},[e._v("发送")])],1)])]):e._e()],1)],1)},Ce=[],Ie=o("ad89"),we=o.n(Ie),Se=o("81bf"),xe=o.n(Se),_e=o("7be9"),ke=o.n(_e),De=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%",height:"260px"},attrs:{id:"hi-sy-palyer"}})},Te=[];m["a"].use(l["a"]);var Be={name:"playerBL",props:{configBl:{type:Object,default:function(){}}},data:function(){return{player:null,config:{}}},mounted:function(){this.init()},created:function(){},beforeDestroy:function(){this.player&&(this.player.destroy,console.log("销毁保利威视播放器"))},methods:{init:function(){var e=this.configBl,t=e.vid,o=e.playsafe,n=e.ts,i=e.sign;e.recordId;if(t&&o){var s={wrap:"#hi-sy-palyer",height:"100%",vid:t,autoplay:!1,playsafe:o,ts:n,sign:i,showHd:!0};console.log("更新播放器",s),this.player=window.polyvPlayer(s),window.s2j_onPlayerInitOver=function(){}}else Object(l["a"])("服务器异常：获取配置失败")}}},$e=Be,Ne=Object(C["a"])($e,De,Te,!1,null,"33b7b4d6",null),Ae=Ne.exports,je=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Oe=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{width:"100%",height:"260px"},attrs:{id:"playerZSBox"}}),o("div",{attrs:{id:"gsVideoDoc"}})])}],Le=o("452a"),Pe=o.n(Le),Ee=o("f7fd"),qe=o.n(Ee);m["a"].use(l["a"]);var Ue={name:"playerZS",props:{configZs:{type:Object,default:function(){}},chatmsg:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){this.init()},watch:{},beforeDestroy:function(){console.log("销毁展示互动播放器"),clearInterval(this.findGSDomTimer),clearInterval(this.findGSDom2Timer)},methods:{init:function(){var e=this;console.log(this.configZs);var t=this.configZs,o=t.site,n=t.ownerid,i=t.authcode,s=t.k,a=t.videoDomName,r=t.uname,c=t.uid;if(o&&n&&i&&s){var u,d,h=document.createElement("gs:"+a);h.setAttribute("id","hangjia_sy_player_gs"),h.setAttribute("group","hangjia_sy_player_gs"),h.setAttribute("style","width: 100%; height: 100%;"),h.setAttribute("bar","true"),h.setAttribute("ctx","webcast"),h.setAttribute("post",!0),h.setAttribute("site",o),h.setAttribute("uname",r),h.setAttribute("uid",c),h.setAttribute("ownerid",n),h.setAttribute("authcode",i),h.setAttribute("k",s),clearInterval(this.findGSDomTimer),this.findGSDomTimer=qe()((function(){var t=document.getElementById("playerZSBox");t&&(clearInterval(e.findGSDomTimer),t.appendChild(h),window.GS.loadTag(a,h))}),50),this.channel=window.GS.createChannel("hangjia_sy_player_gs"),Pe()(u=this.channel).call(u,"onDataReady",(function(e){console.log("播放器加载完毕")})),Pe()(d=this.channel).call(d,"onPublicChat",(function(t){console.log("收到公聊信息"),console.log(t),e.$emit("onChatData",t.data)}))}else Object(l["a"])("服务器异常：获取配置失败")},sendChatMsg:function(e){console.log(e),console.log("发送聊天信息"),this.channel.send("submitChat",{content:e.content})}}},Re=Ue,Me=Object(C["a"])(Re,je,Oe,!1,null,"2bb79956",null),We=Me.exports,Ge=(o("2c90"),new m["a"]);m["a"].use(l["a"]);var Ze={name:"learnDetail",data:function(){return{active:1,activeNames:["1"],videoType:1,configBl:{},configZs:{},coverImg:"http://hq-expert.oss-cn-shenzhen.aliyuncs.com/hangjia/v2/image/123529-106-qb1qq2zxkdy404k.jpg",token:Ge.$factory.getcookiesInClient("token")||localStorage.getItem("userToken"),courseData:{},courseIntroduce:{},goodsId:this.$route.query.goodsId||"735",courseId:"",hasBuyCourse:!1,isLive:!1,chatInfo:"",chatList:this.$store.state.chatList,chatmsg:{},chatChildList:[],userInfo:this.$factory.getInfo("userInfo"),canSendMsg:!0}},components:{PlayerBL:Ae,PlayerZS:We},watch:{chatChildList:function(e){var t=this,o=200,n=50;e.length>o&&this.$nextTick((function(){var e;ke()(e=t.chatChildList).call(e,0,n)}))},active:function(e){console.log(e),2===e&&this.chatsScrollToTop()}},mounted:function(){this.getCourseList(),this.getCourseIntroduce(),console.log("用户信息",this.userInfo),console.log(this.$store.state.chatList)},methods:{textEllipsis:function(e){return e&&0!==e.length?e.length>18?xe()(e).call(e,0,18)+"...":e:""},textEllipsis2:function(e){return e&&0!==e.length?e.length>20?xe()(e).call(e,0,20)+"...":e:""},getTime:function(e){if(e[5]>0){var t=xe()(e).call(e,5,16),o=t.replace(/-/g,"月"),n=this.insertStr(o,5,"日");return n}var i=xe()(e).call(e,6,16),s=i.replace(/-/g,"月"),a=this.insertStr(s,4,"日");return a},endTimeSlice:function(e){return xe()(e).call(e,10,16)},insertStr:function(e,t,o){return xe()(e).call(e,0,t)+o+xe()(e).call(e,t)},getCourseList:function(){var e,t=this;this.$fetch(Q()(e="/hjBaseUrl/goods/api/h5/v1/school/getCourseRecordByGoodsId?goodsId=".concat(this.goodsId,"&token=")).call(e,this.token)).then((function(e){e&&200==e.code?t.courseData=e.result:Object(l["a"])("暂无相关章节信息")}))},getCourseIntroduce:function(){var e,t=this;this.$fetch(Q()(e="/hjBaseUrl/goods/api/h5/v1/goods/getGoodsDetailByGoodsId?goodsId=".concat(this.goodsId,"&token=")).call(e,this.token)).then((function(e){e&&200==e.code?(t.courseIntroduce=e.result,t.courseId=e.result.courseId,t.hasBuyCourseFn()):Object(l["a"])("暂无相关课程信息")}))},hasBuyCourseFn:function(){var e,t=this;this.$fetch(Q()(e="/hjBaseUrl/order/api/h5/auth/order/getOrderVoExist?courseId=".concat(this.courseId,"&goodsId=")).call(e,this.goodsId)).then((function(e){e&&200==e.code&&e.result.pmOrderExist&&(t.hasBuyCourse=!0)}))},playVideo:function(e){var t;we()(t=this.courseData).call(t,(function(e){var t;return we()(t=e.list).call(t,(function(e){return e.videoStatus=0}))})),e.videoStatus=1,e.isListen?this.switchPlayer(e):this.hasBuyCourse?this.switchPlayer(e):Object(l["a"])("请重新登录或者确认是否已经购买此课程")},switchPlayer:function(e){var t,o,n=this;(this.isLive=!1,1==e.videoSource)&&(e.vid&&e.recordId&&this.token&&this.$fetch(Q()(t=Q()(o="/hjBaseUrl/goods/api/h5/auth/v1/polyvVideo/getToken?vid=".concat(e.vid,"&recordId=")).call(o,e.recordId,"&token=")).call(t,this.token)).then((function(t){var o;t&&200==t.code?(n.configBl.vid=t.result.data.videoId,n.configBl.playsafe=t.result.data.token,n.configBl.ts=t.result.data.ts,n.configBl.sign=t.result.data.sign,n.configBl.recordId=t.result.data.recordId,n.videoType=1,n.$nextTick((function(){n.videoType=2})),n.$post(Q()(o="/hjBaseUrl/goods/api/h5/auth/v1/logWatchRecord/add?isEnd=1&recordId=".concat(e.recordId,"&token=")).call(o,n.token)).then((function(e){}))):Object(l["a"])(t.msg)})));if(2==e.videoSource){console.log(2==e.videoSource);var i="live",s=e.liveRoomId;if(this.configZs.videoDomName="video-live",e.liveStatus){if("END"===e.liveStatus)i="record",s=e.liveRecordId,this.configZs.videoDomName="video-vod";else if("NOT_STARTED"===e.liveStatus)return void Object(l["a"])("直播尚未开始");"live"===i&&(this.isLive=!0,this.active=2),s&&i&&this.token&&(this.userInfo.uid?this.getGSPlayerConfig(s,i):this.$fetch("/authBaseUrl/api/userInfo?token=".concat(this.token)).then((function(e){200===e.code&&(n.userInfo=e.data,localStorage.setItem("userInfo",M()(e.data)),n.getGSPlayerConfig(s,i))})))}}},getGSPlayerConfig:function(e,t){var o,n,i=this;this.$fetch(Q()(o=Q()(n="/hjBaseUrl/goods/api/h5/auth/v1/thirdPartyLiveCourse/studentEnterLiveRoom?liveRoomId=".concat(e,"&liveType=")).call(n,t,"&token=")).call(o,this.token)).then((function(e){e&&200==e.code?(i.configZs.authcode=e.result.authcode,i.configZs.k=e.result.k,i.configZs.liveRoomUrl=e.result.liveRoomUrl,i.configZs.ownerid=e.result.ownerid,i.configZs.site=e.result.site,i.configZs.uname=i.userInfo.wxNickname||i.userInfo.nickName||"匿名用户",i.configZs.uid=Number(i.userInfo.uid)+1e9,console.log(i.userInfo),i.videoType=1,i.$nextTick((function(){i.videoType=3}))):Object(l["a"])(e.msg)}))},onChatListScroll:function(){var e=this;this.isChatListScroll=!0,clearTimeout(this.onChatListScrollTimer),this.onChatListScrollTimer=V()((function(){e.isChatListScroll=!1,e.chatsScrollToTop()}),3e3)},chatsScrollToTop:function(){var e=this;this.isChatListScroll||this.$nextTick((function(){e.$refs.chatList&&e.$refs.chatList.scrollTo&&(clearTimeout(e.chatsScrollTopTimer),e.chatsScrollTopTimer=V()((function(){e.$refs.chatList.scrollTo(0,e.$refs.chatsWrap.offsetHeight)}),500))}))},onChatData:function(e){console.log("data",e),this.chatChildList.push(e),this.chatsScrollToTop()},sendChatInfo:function(){var e=this;if(this.chatInfo){console.log(this.chatInfo),console.log(this.$refs.chatInput);var t={sender:this.userInfo.wxNickname||this.userInfo.nickName||"匿名用户123",senderId:2,senderUid:this.userInfo.uid||3467734,content:"hi, how are you",richtext:"…..",sendRole:"1,2"};t.richtext=this.chatInfo,t.content=this.chatInfo,this.$refs.childzs.sendChatMsg(t),this.chatChildList.push(t),this.chatInfo="",this.$refs.chatInput.blur(),this.$nextTick((function(){e.$refs.chatList.scrollTo(0,e.$refs.chatsWrap.offsetHeight)}))}}}},Je=Ze,Fe=(o("8356"),o("dd14"),Object(C["a"])(Je,be,Ce,!1,null,"b9b43890",null)),ze=Fe.exports,Qe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"studyInput"},[o("div",{staticClass:"box"},[o("p",{staticClass:"title"},[e._v("恭喜您已报名成功啦！")]),o("p",{staticClass:"text1"},[e._v("如果未添加客服小姐姐的学员")]),o("p",{staticClass:"text2"},[e._v("可长按识别二维码添加客服老师微信")]),o("div",{staticClass:"QR"},[o("img",{attrs:{src:decodeURIComponent(e.goodsCoverImages),alt:"qr"}})]),o("p",{staticClass:"tip"},[e._v("和老师一起学习")])])])},He=[],Ve=(o("a172"),{name:"studyInput",data:function(){return{goodsCoverImages:""}},mounted:function(){this.getGoodsDetail()},methods:{getGoodsDetail:function(){var e,t=this,o=this.$route.query,n=o.goodsId,i=o.userId;fetch(Q()(e="/hjBaseUrl/goods/api/h5/v2/activityGoods/getGoodDetail?goodsId=".concat(n,"&userId=")).call(e,i)).then((function(e){return e.json()})).then((function(e){t.goodsCoverImages=e.result.customerServiceImages}))}}}),Xe=Ve,Ke=(o("807f"),Object(C["a"])(Xe,Qe,He,!1,null,"6fe6ed68",null)),Ye=Ke.exports,et=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"studyInput"},[o("div",{staticClass:"box"},[o("p",{staticClass:"title"},[e._v("仅差一步")]),o("p",{staticClass:"text1"},[e._v("长按扫码添加行家客服")]),o("p",{staticClass:"text2"},[e._v("获取学习优惠券")]),o("div",{staticClass:"QR"},[o("img",{attrs:{src:decodeURIComponent(e.goodsCoverImages),alt:"qr"}})]),o("p",{staticClass:"tip"},[e._v("和老师一起学习")])])])},tt=[],ot={name:"getPaper",data:function(){return{goodsCoverImages:""}},mounted:function(){this.getGoodsDetail()},methods:{getGoodsDetail:function(){var e,t=this,o=this.$route.query,n=o.goodsId,i=o.userId;this.$fetch(Q()(e="/hjBaseUrl/goods/api/h5/v2/activityGoods/getGoodDetail?goodsId=".concat(n,"&userId=")).call(e,i)).then((function(e){t.goodsCoverImages=e.result.customerServiceImages}))}}},nt=ot,it=(o("1d1a"),Object(C["a"])(nt,et,tt,!1,null,"20f1f027",null)),st=it.exports,at=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"studyInput"},[o("div",{staticClass:"box"},[o("p",{staticClass:"title"},[e._v("最后一步")]),o("p",{staticClass:" text text1"},[e._v("您已绑定手机号"+e._s(e.$route.query.mobile)+",")]),o("p",{staticClass:" text text2"},[e._v("稍后客服会与您联系,")]),e._m(0)])])},rt=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{staticClass:" text text3"},[e._v("或者联系我们的客服 "),o("span",[e._v("13192149418")])])}],ct={name:"lastWay",data:function(){return{}}},lt=ct,ut=(o("f25d"),Object(C["a"])(lt,at,rt,!1,null,"e899aea2",null)),dt=ut.exports,ht=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"loginPage"},[o("div",{staticClass:"loginHead"},[o("img",{attrs:{src:e.avatar},on:{error:function(t){return e.replaceImg()}}}),o("p",[e._v(e._s(this.wxNickname))])]),o("router-link",{attrs:{to:{path:"myOrder"}}},[o("div",{staticClass:"myOrder",staticStyle:{"margin-bottom":"16px"}},[o("span",[e._v("我的订单")]),o("i",{staticClass:"iconfont iconright1"})])]),o("div",{staticClass:"myOrder",on:{click:e.closePhoneNum}},[o("span",[e._v("绑定手机")]),o("acronym",[e._v("\n        "+e._s(this.mobileNo)+"\n        "),o("i",{staticClass:"iconfont iconright1"})])],1),o("div",{staticClass:"myOrder",on:{click:e.adviceBack}},[o("span",[e._v("意见反馈")]),o("i",{staticClass:"iconfont iconright1"})]),o("div",{staticClass:"myOrder",on:{click:e.aboutUs}},[o("span",[e._v("关于我们")]),o("i",{staticClass:"iconfont iconright1"})]),o("van-dialog",{attrs:{title:"绑定手机",confirmButtonText:"去绑定",confirmButtonColor:"rgba(255, 120, 71, 1)","show-cancel-button":"",beforeClose:e.beforeClose},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("p",{staticClass:"textCss"},[e._v("根据"),o("acronym",[e._v("《中华人民共和国网络安全法》")]),e._v("要求，自 2017年6月1日起使用信息发布、即时通讯等 互联网服务"),o("acronym",[e._v("需进行身份信息验证")]),e._v("。为保障您的使用体验，建议尽快完成"),o("acronym",[e._v("手机号绑定验证")]),e._v("，感谢您的理解和支持。")],1)])],1)},ft=[],pt=o("04a6"),mt=o.n(pt),gt={name:"myLogin",data:function(){return{show:!1,avatar:"",wxNickname:"",mobileNo:"",defaultPng:"http://alifile.hqjy.com/hq/Avatar.png"}},mounted:function(){var e=localStorage.getItem("phoneNumber"),t=JSON.parse(this.$factory.getcookiesInClient("userInfo")),o=t.headImgUrl,n=t.wxNickname,i=t.mobile;this.avatar=o,this.wxNickname=n,this.mobileNo=e||i,console.log(this.$factory.getcookiesInClient("userInfo")),this.mobileNo||this.loginOne()},methods:{loginOne:function(){var e=this,t=function(t,o,n){var i;if(-1===mt()(i=document.cookie).call(i,"setCookieData")){var s=60*n*60*1e3,a=new Date(+new Date+s);document.cookie=t+"="+escape(o)+";expires="+a.toUTCString(),e.show=!0}else e.show=!1};t("setCookieData",1,24)},adviceBack:function(){location.href="/PersonalCenter/feedback"},aboutUs:function(){location.href="/PersonalCenter/guideAboutus/aboutUs"},replaceImg:function(){var e=event.srcElement;e.onerror=null,e.src=this.defaultPng},outH5:function(){console.log(this.$factory.getcookiesInClient("token")),this.$factory.deleteCookie("token")},beforeClose:function(e,t){"confirm"===e?(this.$router.push({name:"login"}),t()):"cancel"===e&&t()},closePhoneNum:function(){if(this.mobileNo)return!1;this.$router.push({path:"login"})}}},vt=gt,yt=(o("fe5e"),Object(C["a"])(vt,ht,ft,!1,null,"4e7d4b43",null)),bt=yt.exports,Ct=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"myOrder_div"},[o("van-list",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],attrs:{finished:e.finished,error:e.error,"error-text":"请求失败，点击重新加载"},on:{load:e.getList,"update:error":function(t){e.error=t}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(e,t){return o("div",{key:t,staticClass:"list_item"},[o("orderCard",{attrs:{orderDetail:e}})],1)})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"empty_div"},[o("img",{attrs:{src:"https://hq-expert-online-school.oss-cn-shenzhen.aliyuncs.com/demo_img/empty-shopcar.png",width:"50%"}})])],1)},It=[],wt=o("a836"),St=o.n(wt),xt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"orderCard"},[o("div",{staticClass:"order_header"},[o("span",[e._v("订单号："+e._s(e.orderDetail.code))]),o("span",{staticClass:"status_span"},[e._v(e._s(e._f("formatStatus")(e.orderDetail.status)))])]),e._l(e.orderDetail.detailList,(function(t,n){return o("div",{key:n,staticClass:"order_content"},[o("div",{staticClass:"left_box"},[o("img",{attrs:{src:e.$factory.formatImg(t.goodsImage),alt:"",width:"100%",height:"100%"},on:{error:e.imageLoadError}})]),o("div",{staticClass:"right_box"},[o("p",{staticClass:"name_box"},[e._v(e._s(t.goodsName))]),o("p",{staticClass:"price_box"},[e._v("￥ "+e._s(t.goodsPrice))])])])})),o("div",{staticClass:"order_footer"},[o("span",{staticClass:"date_span"},[e._v(e._s(e.orderDetail.endTime))]),o("span",[e._v("\n      实付金额：￥\n      "),o("span",{staticClass:"total_price"},[e._v(e._s(e.orderDetail.totalFee))])])])],2)},_t=[],kt={name:"orderCard",props:{orderDetail:{type:Object,default:function(){}}},components:{},data:function(){return{defaultImg:"https://hq-expert-online-school.oss-cn-shenzhen.aliyuncs.com/demo_img/default-image.png"}},filters:{formatStatus:function(e){switch(e){case 3:return"交易完成";default:break}}},computed:{},watch:{},methods:{imageLoadError:function(e){e.target.src=this.defaultImg}},created:function(){},mounted:function(){}},Dt=kt,Tt=(o("00d4"),Object(C["a"])(Dt,xt,_t,!1,null,"8e276806",null)),Bt=Tt.exports,$t={name:"myOrder",components:{orderCard:Bt},data:function(){return{token:"811a6a658000016df6bde6af84000090",loading:!1,finished:!1,error:!1,list:[],pageNum:1,isFrist:!0,isEmpty:!1}},computed:{},watch:{},methods:{getList:function(){var e=this;this.$factory.getcookiesInClient("token")?this.$fetch("/hjBaseUrl/order/api/h5/auth/activityOrder/getOrderLists",{pageNum:this.pageNum,payStatus:3}).then((function(t){console.log(t);var o,n=t.result;n.list.length>0?(e.list=Q()(o=[]).call(o,St()(e.list),St()(n.list)),e.pageNum=e.pageNum+1):(1==e.pageNum&&(e.isEmpty=!0),e.finished=!0);e.loading=!1})):this.isEmpty=!0}},created:function(){},mounted:function(){}},Nt=$t,At=(o("9563"),Object(C["a"])(Nt,Ct,It,!1,null,"3a891a62",null)),jt=At.exports,Ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"phoneNumber"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]),o("div",{staticClass:"psw"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.verifyCode,expression:"verifyCode"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入验证码"},domProps:{value:e.verifyCode},on:{input:function(t){t.target.composing||(e.verifyCode=t.target.value)}}}),o("input",{ref:"message_get",staticClass:"button",attrs:{type:"button",value:"发送验证码",disabled:e.isDisabled},on:{click:function(t){return e.getCode()}}})]),o("div",{staticClass:"btn",style:{background:e.styleObject},on:{click:function(t){return e.goLogin()}}},[e._v("绑定")]),o("p",{staticClass:"text"},[e._v("绑定后可以在APP使用手机号+密码登录")])])},Lt=[],Pt={name:"login",data:function(){return{countdown:60,phoneNumber:"",verifyCode:"",styleObject:"",isDisabled:!0,userInfo:{modulus:"143007763867708245982550381748032993853797502584594295914200689163618815058321453959983195313535666470252683164261269026983940349924869732959918399568958179803295984852427882791531368219200963823867536269012778315784568514961377749309396708261722002399944277892840971506358083758762598588651936802171373016087",unionId:"CD5Zqld/uu/WLjKeiDdNxznKKj3Zww2tvpQFlrF55151515Qk1eQzJJ7MFDRk5zzjtgyq/jQYoAUBC6mN/Aqj69UWoxx7QEekJ8sBfz13reYHDtIIsX0fpmJxR\nno0MS1SVntdk6UHfUqE=\n",wxNickname:"旺旺"},clickGetCode:!1}},watch:{verifyCode:function(e,t){this.verifyCode&&this.phoneNumber&&(this.styleObject="rgba(255,120,71,1)")},phoneNumber:function(e,t){this.phoneNumber&&this.checkPhone(this.phoneNumber)&&(this.isDisabled=!1)}},mounted:function(){this.$factory.getcookiesInClient("userInfo")&&(this.userInfo=JSON.parse(this.$factory.getcookiesInClient("userInfo"))),document.querySelector("body").setAttribute("style","background-color:#fff")},methods:{checkPhone:function(e){var t=/^1(3|4|5|6|7|8|9)\d{9}$/;return!!t.test(e)},getCode:function(){var e=this;this.clickGetCode=!0,this.$fetch("/authBaseUrl/api/getOtp?mobileNo=".concat(this.phoneNumber,"&type=3")).then((function(t){console.log(t,"发送验证码"),e.countTime()}))},countTime:function(){var e=this,t=this.$refs.message_get;0==this.countdown?(t.removeAttribute("disabled"),t.value="重新发送",this.countdown=60):(t.setAttribute("disabled",!0),t.value=this.countdown+"S",this.countdown--,V()((function(){e.countTime(t)}),1e3))},goLogin:function(e){var t=this;this.$fetch("/hjBaseUrl/stu/api/h5/weixin/refreshModulus?openId=".concat(this.userInfo.openId)).then((function(e){var o={mobileNo:t.phoneNumber,modulus:e.result.modulus,otp:t.verifyCode,unionId:e.result.unionId.replace(/↵/g,""),wxNickname:t.userInfo.wxNickname,clientType:"h5",versionCode:1};if(t.phoneNumber&&t.verifyCode&&t.clickGetCode)return t.$fetch("/authBaseUrl/api/privDomainBindMobile",o,{"Content-Type":"application/x-www-form-urlencoded"})})).then((function(e){200==e.code&&(t.$router.push({name:"myLogin"}),localStorage.setItem("phoneNumber",t.phoneNumber)),400==e.code&&(console.log(e.message),alert("验证码错误请重试!"))}))}}},Et=Pt,qt=(o("404b"),Object(C["a"])(Et,Ot,Lt,!1,null,"bd1621be",null)),Ut=qt.exports,Rt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"productBox"},[o("Dialog",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],on:{closeDialog:e.closeDialog,login:e.goLogin}})],1)},Mt=[],Wt={name:"replaceLogin",data:function(){return{appId:"wx305763b6658f28fb",Dialog:!1,isShow:!1,isRequest:!1,goodsCoverImages:[],code:"",mobile:"",token:localStorage.getItem("userToken")||"",openId:localStorage.getItem("openId")||"",priceDate:{originalPrice:null,buyPrice:null,discount:null,code:""},unionId:"",modulus:"",wxNickname:"",newsShareInfo:{}}},components:{Dialog:ce},mounted:function(){this.getWxCode(),window.addEventListener("blur",(function(){V()((function(){document.body.scrollIntoView(!1)}),0)}),!0)},methods:{goodsPvAndUv:function(){var e=location.href;this.$fetch("/hjBaseUrl/operate/api/h5/siYuH5LangdingPage/goodsPvAndUv?interfaceName=".concat(e)).then((function(e){}))},buyGoodsButtoon:function(){this.$fetch("/hjBaseUrl/operate/api/h5/siYuH5LangdingPage/buyGoodsButtoon").then((function(e){}))},getWxCode:function(){var e=location.href;if(this.$route.query.code){var t=this.$route.query.scope,o=void 0===t?"snsapi_base":t;this.conmmonLogin(o)}else{var n;location.href=Q()(n="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(this.appId,"&redirect_uri=")).call(n,encodeURIComponent(e),"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect")}},getOther:function(){var e,t,o,n=location.href.split("?")[0],i=this.$route.query,s=i.goodsId,a=i.userId,r=void 0===a?"":a,c=Q()(e=Q()(t="".concat(n,"?goodsId=")).call(t,s,"&userId=")).call(e,r,"&scope=snsapi_userinfo");location.href=Q()(o="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(this.appId,"&redirect_uri=")).call(o,encodeURIComponent(c),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},getGoodsDetail:function(){var e,t=this,o=this.$route.query,n=o.goodsId,i=o.userId,s=void 0===i?"":i;this.$fetch(Q()(e="/hjBaseUrl/goods/api/h5/v2/activityGoods/getGoodDetail?goodsId=".concat(n,"&userId=")).call(e,s)).then((function(e){t.goodsCoverImages=e.result.goodsCoverImages,t.priceDate=e.result,V()((function(){document.title=e.result.name;var t=document.createElement("iframe");t.style.display="none",t.onload=function(){},document.body.appendChild(t)}),0),t.newsShareInfo.title=e.result.name,t.newsShareInfo.desc="",t.newsShareInfo.link=window.location.href,t.newsShareInfo.imgUrl=decodeURIComponent(e.result.goodsCoverImages[0]),t.isWeiXin()&&t.getWxSign()}))},isWeiXin:function(){var e=window.navigator.userAgent.toLowerCase(),t=!!/micromessenger/.test(e);return t?(console.log("你正处于微信环境"),!0):(console.log("不是微信环境"),!1)},getWxSign:function(){var e=this;fethis.$fetchtch("/hjBaseUrl/inf/api/h5/information/sign?url=".concat(window.location.href)).then((function(t){if(console.log(t),t){var o={debug:!1,appId:e.appId,timestamp:t.result.timestamp,nonceStr:t.result.nonceStr,signature:t.result.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","showOptionMenu","hideAllNonBaseMenuItem","showAllNonBaseMenuItem"]};window.wx.config(o);var n=e.newsShareInfo;console.log(n),window.wx.ready((function(){window.wx.onMenuShareAppMessage(n),window.wx.onMenuShareTimeline(n),window.wx.onMenuShareQQ(n),window.wx.onMenuShareQZone(n),window.wx.onMenuShareWeibo(n)})),window.wx.error((function(e){console.log(e)}))}}))},closeDialog:function(e){this.isShow=e},conmmonLogin:function(e){var t,o=this,n=this.$route.query.code;this.priceDate.code=n,this.$fetch(Q()(t="/hjBaseUrl/stu/api/h5/weixin/loginByCode?code=".concat(n,"&scope=")).call(t,e)).then((function(e){o.isRequest=!0;var t=e.result.resultCode;switch(o.unionId=e.result.unionId,o.wxNickname=e.result.wxNickname,o.modulus=e.result.modulus,o.token=e.result.token,localStorage.setItem("userToken",e.result.token),localStorage.setItem("openId",e.result.openId),o.openId=e.result.openId,t){case 10100:alert("请联系管理员");break;case 200:o.$router.push({name:o.$route.query.routerName,query:o.$route.query});break;case 10102:o.getOther();break;case 1:o.isShow=!0;break}})).catch((function(e){return alert(e)}))},buyCourse:function(){var e=this;this.buyGoodsButtoon();var t=this.$route.query,o=t.goodsId,n=t.userId,i=void 0===n?"":n;if(this.isShow=this.Dialog,!this.isShow&&this.isRequest){var s={openId:this.openId,cip:returnCitySN["cip"],goodsId:o,paymentEntry:6,goodsOperators:i};this.$post("/hjBaseUrl/order/api/h5/auth/activityOrder/saveOrder",s,{userToken:this.token}).then((function(t){e.mobile=t.result.mobile,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):t.result.isFree?e.$router.push({name:"studyInput",query:{goodsId:o,userId:i}}):t.result.orderExist?e.$router.push({name:"lastWay",query:{goodsId:o,userId:i,mobile:e.mobile}}):e.WxPay(t.result.wxPayPayResult)})).catch((function(e){return console.error("Error:",e)}))}},WxPay:function(e){var t=this,o=this.$route.query,n=o.goodsId,i=o.userId,s=void 0===i?"":i;WeixinJSBridge.invoke("getBrandWCPayRequest",e,(function(e){"get_brand_wcpay_request:ok"==e.err_msg&&t.$router.push({name:"lastWay",query:{goodsId:n,userId:s,mobile:t.mobile}})}))},goLogin:function(e){var t=this;this.$fetch("/hjBaseUrl/stu/api/h5/weixin/refreshModulus?openId=".concat(localStorage.getItem("openId")),{method:"GET"}).then((function(o){var n={mobileNo:e[0],modulus:o.result.modulus,otp:e[1],unionId:o.result.unionId.replace(/↵/g,""),wxNickname:t.wxNickname,clientType:"h5",versionCode:1};if(e[0]&&e[1])return t.$post("/authBaseUrl/api/privDomainBindMobile",n,{"Content-Type":"application/x-www-form-urlencoded"})})).then((function(e){200==e.code&&(t.isShow=!1,t.Dialog=!1,t.token=e.data.token,localStorage.setItem("userToken",e.data.token),t.$router.push({name:t.$route.query.routerName,query:t.$route.query})),400==e.code&&alert(e.message)}))},goFree:function(){if(this.priceDate.isDiscount)return!1;var e=this.$route.query,t=e.goodsId,o=e.userId,n=void 0===o?"":o;this.$router.push({name:"getPaper",query:{goodsId:t,userId:n}})}}},Gt=Wt,Zt=(o("80de"),Object(C["a"])(Gt,Rt,Mt,!1,null,"74e20ae7",null)),Jt=Zt.exports,Ft=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"studyCourse"},[o("div",{staticClass:"header"},[o("span",{staticClass:"allCourse",class:e.allStatus?"textAct":"",on:{click:e.activeAll}},[e._v("全部")]),o("span",{staticClass:"filterTime",class:e.timeStatus?"textAct":"",on:{click:e.activeStudy}},[e._v("\n      按学习时间\n      "),o("div",{staticClass:"sort-order"},[o("i",{staticClass:"sort-order-item",class:e.timeStatus?e.isStyle?"asc":"ascAct":"asc"}),o("i",{staticClass:"sort-order-item",class:e.timeStatus&&e.isStyle?"active":"desc"})])]),o("span",{staticClass:"filterJoin",class:e.joinStatus?"textAct":"",on:{click:e.activeJoin}},[e._v("\n      按加入时间\n      "),o("div",{staticClass:"sort-order"},[o("i",{staticClass:"sort-order-item",class:e.joinStatus?e.isActive?"asc":"ascAct":"asc"}),o("i",{staticClass:"sort-order-item",class:e.joinStatus&&e.isActive?"active":"desc"})])]),o("span",{staticClass:"icon",on:{click:e.openBox}},[o("i",{staticClass:"iconfont iconshaixuan"})])]),o("div",{staticClass:"content"},[o("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t,n){return o("div",{key:n,staticClass:"course",on:{click:function(o){return e.goCourse(t.hjGoodId)}}},[o("span",{staticClass:"position"},[o("img",{attrs:{src:decodeURIComponent(t.coursePic),alt:"课程图片"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.hasProcessing,expression:"item.hasProcessing===1"}],staticClass:"shadow"},[o("i",{staticClass:"iconfont iconPCbofangye_paihangbang"}),o("span",[e._v("直播中")])])]),o("div",{staticClass:"text"},[o("span",[e._v(e._s(t.courseName))]),o("p",[e._v("已学习"+e._s(t.watchRecordNum)+"/"+e._s(t.totalRecordNum)+"课时")])])])})),0)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isBox,expression:"isBox"}],staticClass:"box"},[o("p",{class:e.boxAll?"textColor":"",on:{click:e.allCourse}},[e._v("全部")]),o("p",{class:e.boxAll?"":"textColor",on:{click:e.payCourse}},[e._v("付费")])])])},zt=[],Qt={name:"studyCourse",data:function(){return{isBox:!1,isActive:!1,isStyle:!1,allStatus:!0,timeStatus:!1,joinStatus:!1,boxAll:!0,list:[],loading:!1,finished:!1,riseOrFall:1,queryType:1,orderType:"",page:0,token:""}},mounted:function(){this.token=this.$factory.getcookiesInClient("token"),0===this.list.length&&this.init()},methods:{getCourseList:function(){var e,t,o,n,i=this;this.$fetch(Q()(e=Q()(t=Q()(o=Q()(n="/hjBaseUrl/goods/api/h5/auth/v2/activityGoods/courseList?riseOrFall=".concat(this.riseOrFall,"&queryType=")).call(n,this.queryType,"&orderType=")).call(o,this.orderType,"&limit=10&page=")).call(t,this.page,"&token=")).call(e,this.token)).then((function(e){var t,o=e.result.list;o.length>0?i.list=Q()(t=i.list).call(t,o):i.finished=!0;i.loading=!1}))},goCourse:function(e){this.$router.push({name:"learnDetail",query:{goodsId:e}})},onLoad:function(){var e,t,o,n,i=this;(this.page+=1,this.token)?this.$fetch(Q()(e=Q()(t=Q()(o=Q()(n="/hjBaseUrl/goods/api/h5/auth/v2/activityGoods/courseList?riseOrFall=".concat(this.riseOrFall,"&queryType=")).call(n,this.queryType,"&orderType=")).call(o,this.orderType,"&limit=10&page=")).call(t,this.page,"&token=")).call(e,this.token)).then((function(e){var t,o=e.result.list;o.length>0?i.list=Q()(t=i.list).call(t,o):i.finished=!0;i.loading=!1})):(this.finished=!0,this.loading=!1)},openBox:function(){this.isBox=!this.isBox},activeJoin:function(){this.isActive=!this.isActive,this.joinStatus=!0,this.timeStatus=!1,this.allStatus=!1,this.orderType=2,this.isActive?this.riseOrFall=1:this.riseOrFall=2,this.init()},activeStudy:function(){this.isStyle=!this.isStyle,this.timeStatus=!0,this.allStatus=!1,this.joinStatus=!1,this.orderType=1,this.isStyle?this.riseOrFall=1:this.riseOrFall=2,this.init()},activeAll:function(){this.init(),this.allStatus=!0,this.joinStatus=!1,this.timeStatus=!1},allCourse:function(){this.boxAll=!0,this.queryType=1,this.init(),this.isBox=!1},payCourse:function(){this.boxAll=!1,this.queryType=2,this.isBox=!1,this.init()},init:function(){this.list=[],this.page=1,this.getCourseList()}}},Ht=Qt,Vt=(o("9d28"),Object(C["a"])(Ht,Ft,zt,!1,null,"c8e457c2",null)),Xt=Vt.exports;function Kt(e,t){var o=U()(e);if(E.a){var n=E()(e);t&&(n=L()(n).call(n,(function(t){return j()(e,t).enumerable}))),o.push.apply(o,n)}return o}function Yt(e){for(var t=1;t<arguments.length;t++){var o,n=null!=arguments[t]?arguments[t]:{};if(t%2)N()(o=Kt(n,!0)).call(o,(function(t){G()(e,t,n[t])}));else if(B.a)D()(e,B()(n));else{var i;N()(i=Kt(n)).call(i,(function(t){_()(e,t,j()(n,t))}))}}return e}m["a"].use(Z["a"]);var eo=new Z["a"]({mode:"history",base:"/discharge/",routes:[{path:"/index",name:"Detail",component:he,meta:{keepAlive:!0}},{path:"/study",name:"studyInput",component:Ye},{path:"/paper",name:"getPaper",component:st},{path:"/last",name:"lastWay",component:dt},{path:"/learnDetail",name:"learnDetail",component:ze},{path:"/Home",name:"Home",component:ye,redirect:"/studyCourse",children:[{path:"/myLogin",name:"myLogin",component:bt},{path:"/studyCourse",name:"studyCourse",component:Xt}]},{path:"/myOrder",name:"myOrder",component:jt},{path:"/Login",name:"login",component:Ut},{path:"/replaceLogin",name:"replaceLogin",component:Jt}]});eo.beforeEach((function(e,t,o){if("replaceLogin"!=e.name&&"Detail"!=e.name){var n=localStorage.getItem("userToken")&&"false"!=localStorage.getItem("userToken")?localStorage.getItem("userToken"):m["a"].prototype.$factory.getcookiesInClient("token")||!1;m["a"].prototype.$fetch("/authBaseUrl/api/userInfo?token=".concat(n)).then((function(t){if(t&&200!=t.code)eo.push({name:"replaceLogin",query:Yt({},e.query,{routerName:e.name})});else{var o=M()(t.data);localStorage.setItem("userInfo",o)}}))}o()}));var to=eo,oo=o("591a");m["a"].use(oo["a"]);var no=new oo["a"].Store({state:{chatList:[],newChatInfo:{}},mutations:{changeList:function(e,t){var o;t&&(e.chatList=Q()(o=[]).call(o,St()(e.chatList),St()(t)),console.log(e.chatList))}},actions:{}}),io=o("e04f"),so=o.n(io),ao=o("2427"),ro=o.n(ao),co={getcookiesInClient:function(e){return!(!so.a.get(e)||""==so.a.get(e))&&so.a.get(e)},getInfo:function(e){return!!JSON.parse(localStorage.getItem(e))&&JSON.parse(localStorage.getItem(e))},formatImg:function(e){var t=e.split(",");return decodeURIComponent(t[0])},deleteCookie:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expire="+t.toGMTString()}},lo=o("828b"),uo=o.n(lo),ho=o("61d5"),fo=o.n(ho),po=o("5ee4"),mo=o.n(po);function go(e,t){var o=U()(e);if(E.a){var n=E()(e);t&&(n=L()(n).call(n,(function(t){return j()(e,t).enumerable}))),o.push.apply(o,n)}return o}function vo(e){for(var t=1;t<arguments.length;t++){var o,n=null!=arguments[t]?arguments[t]:{};if(t%2)N()(o=go(n,!0)).call(o,(function(t){G()(e,t,n[t])}));else if(B.a)D()(e,B()(n));else{var i;N()(i=go(n)).call(i,(function(t){_()(e,t,j()(n,t))}))}}return e}var yo=new m["a"];var bo=function(e){e&&yo.$toast.fail(e)};function Co(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new fo.a((function(n,i){ro.a.get(e,{params:t,headers:vo({"Content-Type":"application/json"},o)}).then((function(e){n(e.data)})).catch((function(e){i(e)}))}))}function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=vo({"Content-Type":"application/json"},o);return new fo.a((function(o,i){ro.a.post(e,t,{headers:n}).then((function(e){o(e.data)}),(function(e){i(e)}))}))}ro.a.defaults.withCredentials=!0,ro.a.interceptors.request.use((function(e){return"post"===e.method&&"application/json"!==e.headers["Content-Type"]&&(e.transformRequest=[function(e){return mo.a.stringify(e)}]),e.headers["userToken"]=localStorage.getItem("userToken")&&"false"!=localStorage.getItem("userToken")?localStorage.getItem("userToken"):yo.$factory.getcookiesInClient("token")||"",e}),(function(e){fo.a.reject(e)})),ro.a.interceptors.response.use((function(e){e.config;var t=e.request,o=t.responseURL,n=t.res,i=t.path;t.method,o||n&&n.responseUrl;if(e&&e.data||bo("服务器无响应"),200!==e.data.code)e.data.msg||e.data.message;return e}),(function(e){var t=[1002,401],o=uo()(t).call(t,e.response.data.code);if(!o){bo("服务器异常，请联系管理员");try{e.config}catch(n){console.log(n)}return fo.a.reject(e)}}));o("44ce"),o("4ee2");v.a.polyfill(),m["a"].config.productionTip=!1,m["a"].use(f["a"]).use(p["a"]),m["a"].use(d["a"]).use(h["a"]),m["a"].use(u["a"]),m["a"].use(l["a"]),m["a"].use(r["a"]).use(c["a"]),m["a"].use(s["a"]).use(a["a"]),m["a"].use(i["a"]),m["a"].use(n["a"]),m["a"].prototype.$fetch=Co,m["a"].prototype.$post=Io,m["a"].prototype.$factory=co,new m["a"]({router:to,store:no,render:function(e){return e(S)}}).$mount("#app")},"56df":function(e,t,o){"use strict";var n=o("71ab"),i=o.n(n);i.a},"5af3":function(e,t,o){"use strict";var n=o("c4f0"),i=o.n(n);i.a},"71ab":function(e,t,o){},"760c":function(e,t,o){},"7c55":function(e,t,o){"use strict";var n=o("bc84"),i=o.n(n);i.a},"7c94":function(e,t,o){},"807f":function(e,t,o){"use strict";var n=o("a05f"),i=o.n(n);i.a},"80de":function(e,t,o){"use strict";var n=o("7c94"),i=o.n(n);i.a},8356:function(e,t,o){"use strict";var n=o("a90e"),i=o.n(n);i.a},9563:function(e,t,o){"use strict";var n=o("31cc"),i=o.n(n);i.a},9667:function(e,t,o){"use strict";var n=o("e2c8"),i=o.n(n);i.a},"9d28":function(e,t,o){"use strict";var n=o("760c"),i=o.n(n);i.a},a05f:function(e,t,o){},a172:function(e,t,o){e.exports=o.p+"img/bgPic.ee070071.jpg"},a427:function(e,t,o){},a663:function(e,t,o){},a90e:function(e,t,o){},bc84:function(e,t,o){},c4f0:function(e,t,o){},d232:function(e,t,o){},dd14:function(e,t,o){"use strict";var n=o("3a1f"),i=o.n(n);i.a},e2c8:function(e,t,o){},ed3a:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC60lEQVRYR8WXW6iNaRjHf/8LSo6ZsWVf2ENJMzUkdlzt5M4NIZJyuNAISbYLNy6Im12OyQVhmqYmDBckTHJMMTEUxY2cSgqjXLjUX8/e71p9lvXt7/scWm99a9Va7/M8v+95n9MrSi7bw4E5wFxgPPAj8EMS/x94AzwGTgGnJb0ro1pFm2z/DKwDlgB3gb+BW8Dr9ISKUenpBBYCU4C/gH2SHvZno18A27uADcBB4JCkMFy4bAfISuA3YLek7jyhXADbx5NQj6T/Cq022WB7KrAp/pK0qJmOpgC2n4Sb84SqwqSX6ZQ0rlH2MwDbcbb7JW2paqi//bZD31pJES/19QmA7WvARUlbv6Xxmq4EMUtSV+23OoDtvcCYb+X2vBew/SfwTNLm3tiID9u/AveAaV8acGU9lgLzNvBLpGgN4ECK1FXNFKUgOi7pRBlDticAx4BuSVcaZWzX7cn20HAJMFvSvzkAA1OFO1wEYXsssAM4Iul8jr7pwDmgIwDmRa5KmlEQxcOAs8CePAjbo4H1yfijAn03gZ4AOJpyfmeRe223AReAbY0QtkcA84HfJbmEro1AZwDcAVZVKLMdwOXktegLEcSDepVJkcalVirXBwLgOdAl6WkpyT6DE4HrwBrgZErfF2XlE/RPwLUAeA+0SYrv0sv2ZCCCdrmkiPhKy/Zg4NXXAIQX4ggihj5I6qlCkAX4kiMI90VNOBM9w/b2GE4krS4LYbt+BFWDsD0mnprxmkHbkUWjJC0rA5ENwippGCPYP43GMxD7gHZJC4ogbNfTsGwhGgJEWe11e54B2zE9DZO0uGwhKlOKBwA3ioxnPPFHZKukFYWlOOVkUTOKwnO1ypCSKuzDZrPFJ80oAcTk+yCvHdue2ayrlTjnkZLeZvdl2vEkSfezA0mkUoekpUWKv+b/1NpfSoqm1TeQZM4uavmlKq6uAtPvSJaBaN1QmoFo3ViegWjdxSQD0bqrWQaidZfThgz5Ltfzj4J/p2Lt11VCAAAAAElFTkSuQmCC"},f25d:function(e,t,o){"use strict";var n=o("33e8"),i=o.n(n);i.a},fe5e:function(e,t,o){"use strict";var n=o("0c01"),i=o.n(n);i.a},fefb:function(e,t,o){}});